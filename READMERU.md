# üé≠ Face Swap Pipeline  
**–ü–æ–ª—å–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ª–∏—Ü **  
Gemini ‚Üí Seedream ‚Üí final cinematic output

---

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ

Face Swap Pipeline ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –±–µ—Ä—ë—Ç:

- **2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏—Ü–∞** (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –ª–∏—á–Ω–æ—Å—Ç–∏)  
- **1 –∏–ª–∏ N —Å—Ü–µ–Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**  
- **–ø—Ä–æ–º–ø—Ç –¥–ª—è Gemini**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å  

–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å —á–µ–ª–æ–≤–µ–∫–∞, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:

**(Face1, Face2, Scene) ‚Üí Gemini ‚Üí Seedream ‚Üí PNG —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úî –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ **2 –ª–∏—Ü–∞** ‚Üí –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ö –±—É–¥–µ—Ç –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ª–∏—á–Ω–æ—Å—Ç—å  
‚úî –ú–Ω–æ–≥–æ —Å—Ü–µ–Ω ‚Üí –ø–∞—á–µ—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è  
‚úî Gemini —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç **Seedream-prompt** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **mock-—Ä–µ–∂–∏–º–∞**  
‚úî –ü–æ–ª–Ω–∞—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å: clients, utils, main  
‚úî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CLI-–Ω–∞–≤–∏–≥–∞—Ü–∏—è  
‚úî –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **PNG + TXT**

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞_–ü—Ä–æ–µ–∫—Ç–∞

Face_Swap_Pipeline/
‚îÇ
‚îú‚îÄ‚îÄ FACE/ # put EXACTLY 2 face images here
‚îú‚îÄ‚îÄ SCENE/ # put all scene images here
‚îú‚îÄ‚îÄ OUTPUT/ # generated results
‚îÇ
‚îú‚îÄ‚îÄ examples/ # for README demonstration images
‚îÇ ‚îú‚îÄ‚îÄ Face1.jpeg
‚îÇ ‚îú‚îÄ‚îÄ Face2.png
‚îÇ ‚îú‚îÄ‚îÄ Scene.jpg
‚îÇ ‚îî‚îÄ‚îÄ output.jpeg
‚îÇ
‚îú‚îÄ‚îÄ gemini_user_prompt.txt
‚îú‚îÄ‚îÄ config_example.json
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ utils.py
‚îú‚îÄ‚îÄ gemini_client.py
‚îú‚îÄ‚îÄ seedream_client.py
‚îî‚îÄ‚îÄ .env

yaml
Skopiuj kod

---

# üì∏ **–î–æ / –ü–æ—Å–ª–µ –ü—Ä–∏–º–µ—Ä—ã**

| Face 1 | Face 2 |
|--------|--------|
| ![](examples/Face1.jpeg) | ![](examples/Face2.png) |

| Scene | Output |
|--------|--------|
| ![](examples/Scene.jpg) | ![](examples/output.jpeg) |

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/xuligan13/Face_Swap_Pipeline
cd Face_Swap_Pipeline
python -m venv venv
source venv/bin/activate      # Mac/Linux
venv\Scripts\activate         # Windows
pip install -r requirements.txt
‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
1. –î–æ–±–∞–≤—å —Å–≤–æ–∏ api-–∫–ª—é—á–∏
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env:

GEMINI_API_KEY=your_key_here
SEEDREAM_API_KEY=your_key_here
2. –î–æ–±–∞–≤—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ & —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å—Ü–µ–Ω–∞(–≥–¥–µ –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –ª–∏—Ü–æ)
–í –ø–∞–ø–∫—É FACE/ ‚Äî —Ä–æ–≤–Ω–æ 2 —Ñ–∞–π–ª–∞

–í –ø–∞–ø–∫—É SCENE/ ‚Äî —Å–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å —Å—Ü–µ–Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π(–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –æ—Ç 20-25)

3. –ò–∑–º–µ–Ω–∏ –ø—Ä–æ–º–ø—Ç,–µ—Å–ª–∏ —Å—á–∏—Ç–∞–µ—à—å —ç—Ç–æ –Ω—É–∂–Ω—ã–º(–° –º–æ–∏–º –ø—Ä–æ–º–ø—Ç–æ–º –ø–æ–ª—É—á–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –≤—ã—à–µ)
–§–∞–π–ª:

bash
–°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥
gemini_user_prompt.txt

–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º Gemini.

‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É
bash
–°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥
python main.py
–°–∫—Ä–∏–ø—Ç:

–ù–∞—Ö–æ–¥–∏—Ç 2 –ª–∏—Ü–∞

–ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å—Ü–µ–Ω—ã

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—é–º–µ

–ñ–¥—ë—Ç –Ω–∞–∂–∞—Ç–∏—è Enter

–ó–∞–ø—É—Å–∫–∞–µ—Ç Gemini ‚Üí Seedream

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

bash
–°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥
OUTPUT/0001_name.png
OUTPUT/0001_name.txt
üß™ –¢–µ—Å—Ç–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç(–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è api-–∫–ª—é—á–∞ gemini, –Ω–æ –Ω—É–∂–µ–Ω api-–∫–ª—é—á Seedream)


–ü–æ–ª–æ–∂–∏ 2 –ª–∏—Ü–∞ ‚Üí –∑–∞–ø—É—Å–∫–∞–π ‚Üí –æ—à–∏–±–æ–∫ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ

–ü–æ–ª–æ–∂–∏ 1 –∏–ª–∏ 3 –ª–∏—Ü–∞ ‚Üí –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É

Test mock Gemini

–£—Å—Ç–∞–Ω–æ–≤–∏ –≤ config:

bash
–°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥
"gemini": { "mode": "mock" }
–£–±–µ–¥–∏—Å—å, —á—Ç–æ pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API

Test real API

–ó–∞–ø—É—Å–∫ –Ω–∞ 1 —Å—Ü–µ–Ω–µ

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç Gemini

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä Seedream

Test invalid files

–î–æ–±–∞–≤—å –≤ SCENE –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª, txt –∏–ª–∏ –±–∏—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å

üîç Potential Improvements (TODO)
–î–æ–±–∞–≤–∏—Ç—å WebUI (Gradio/FastAPI)

–î–æ–±–∞–≤–∏—Ç—å –º—É–ª—å—Ç–∏–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

–°–¥–µ–ª–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (resize 1024x1024)

GitHub Actions (–ª–∏–Ω—Ç–∏–Ω–≥ + —Ç–µ—Å—Ç—ã)

ü§ù Contributing
PR—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
–ù–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ .env –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ñ–æ—Ç–æ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.

